# 有效的括号

LeetCode：20

用栈解决的经典题目

给一个字符串，判断左括号是不是有一个对应的右括号来匹配

## 整体思路

不匹配的三种情况

1. 左面括号多余

   (  [  {  }  ]  ( )

2. 左右括号类型不匹配

   [  {  (  }  }  ]

3. 右面括号多余

   [  {  }  ]  (  )  )  )  )



## 栈模拟三种不匹配的情况

在遍历字符串中，遇到了左括号，就把一个对应的右括号加入栈中

当遇到左括号，加入其相反的括号

当遇到右括号，比较栈顶元素，若相符，则出栈，往下遍历

否则，不匹配

1. 对于情况  (  [  {  }  ]  ( )

   ```
   --------------
        }  ]  )  |
   --------------
   
   --->
   
   --------------
             )  |
   --------------
   ```

   加入了三个左括号

   遍历到右括号时，与栈顶元素比较，相同则出栈

   最后发现滞留了一个右括号，因为左括号多余

   栈不为空，不匹配

2. 对于情况[  {  (  }  }  ]

   ```
   --------------
        )  }  ]  |
   --------------
   ```

   加入三个右括号后

   发现右花括号，与栈顶元素不匹配

   说明不匹配

3. 对于情况[  {  }  ]  (  )  )  )  )

   ```
   --------------
          }  ]  |
   --------------
   
   --->
   
   --------------
             ]  |
   --------------
   
   --->
   
   --------------
             )  |
   --------------
   
   --->
   
   --------------
                |
   --------------
   ```

   发现字符串还没有遍历完，栈就已经为空

   说明右括号空了

   不匹配



## 代码实现

1. 定义一个栈

2. 剪枝操作

   如果要匹配，那么字符串长度一定是偶数

3. 遍历字符串

   如果出现左括号，入栈相应的右括号

4. 如果遇到右括号

   与栈顶元素比较，不相等则return false

5. 当遍历中出现栈为空

   则返回false

6. 若能进行比较且相等，则栈顶元素出栈

7. 遍历完

   若栈不为空，返回false

   若为空，放回true

```c++
static<char> st;

if(s.size()%2 != 0) return false;

for(i=0; i<s.size; i++){
    if(s[i]=='(') st.push(')');
    else if(s[i]=='{') st.push('}');
    else if(s[i]=='[') st.push(']');
    else if(st.empty() || st.top() != s[i]) return false;
    else st.pop();
}

return st.empty();
```

